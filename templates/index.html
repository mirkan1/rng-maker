<!DOCTYPE html>
<html lang="en">
<link type="text/css" rel="stylesheet" id="dark-mode-custom-link">
<link type="text/css" rel="stylesheet" id="dark-mode-general-link">
<style lang="en" type="text/css" id="dark-mode-custom-style"></style>
<style lang="en" type="text/css" id="dark-mode-native-style"></style>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='Solana Drink_files/style.css') }}">
    <link href="{{ url_for('static', filename='Solana Drink_files/css2" rel="stylesheet') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='Solana Drink_files/all.min.css') }}" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="{{ url_for('static', filename='css/all.css') }}" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/florin.css')}}">
    <title>Rolling Suzannes</title>
</head>

<body data-new-gr-c-s-check-loaded="14.1041.0" data-gr-ext-installed="" cz-shortcut-listen="true" onload="loadData()">
    <header>
        <div class="logo">
            <img src="https://www.dummies.com/wp-content/uploads/479857.image0.jpg" alt="logo">
            <h3>$ROTS<span>beta</span></h3>
        </div>
        <ul>
            <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#roadmap"><i class="fas fa-map-pin"></i> Roadmap</a></li>
            <li><a href="#" id="account_info" onclick="checkIfWalletIsConnected()"><i class="fa-solid fa-wallet"></i> Connect</a></li>
        </ul>
        <div class="burger"><i class="fas fa-bars"></i></div>
    </header>
    <div class="slide-menu" style="left: -100%;">
        <a href="#"><i class="fas fa-home"></i> Home</a>
        <a href="#roadmap"><i class="fas fa-map-pin"></i> Roadmap</a>
        <a href="#" id="account_info" onclick="checkIfWalletIsConnected()"><i class="fa-solid fa-wallet"></i> Connect</a>
    </div>
    <div id="home">
        <div class="intro">
            <h2>Rotating Suzannes <i class="fa-solid fa-monkey"></i></h2>
            <p>Rotating Suzannes is a crypto coin based on Solana Ecosystem. Besides, it has beautiful 32x32 pixels 1,010 NFTs unique randomly generated. You can enjoy your ROTS's NFT on Dec 7th 2021.</p>
            <div class="home-btns">
                <a class="mint-btn" href="#" onclick="askContractToMintNft()"><i class="fas fa-hammer"></i> MINT</a>
                <a class="mint-btn" href="#" onclick="getRGBA()"><i class="fas fa-hammer"></i> getRGBA</a>
                <!-- <a class="rarity-btn" href="#"><i class="fas fa-layer-group"></i> RARITY</a> -->
            </div>
            <div class="socmed">
                <a href="https://twitter.com/solanadrink" target="_blank"><i class="fab fa-twitter"></i></a>
                <a href="https://solanadrink.com/#"><i class="fab fa-telegram"></i></a>
                <a href="https://discord.gg/solanadrink" target="_blank"><i class="fab fa-discord"></i></a>
            </div>
            <div class="partner">
                <p>See us on:</p>
                <a href="https://nftcalendar.io/event/solana-drink/" target="_blank"><img src="{{ url_for('static', filename='img/nftcalendar.png') }}" alt="nft-calendar"></a>
            </div>
        </div>
        <div style="display: flex; flex-direction: column;">
            <div style="background: black; width:100%; min-height: 150px; margin: 10% 0; padding:2%; border-style: solid; border-color: white;">
                <p id="info" style="color: white">INFO</p>
            </div>
            <div class="nft-shill" style="transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1); will-change: transform;">
                <img src="https://www.dummies.com/wp-content/uploads/479857.image0.jpg" alt="drinks-nft">
            </div>
        </div>
    </div>
    <!-- <img id="image" width="fit-content" height="fit-content" src="{{ url_for('static', filename='img/nftcalendar.png') }}"> -->
    <!-- <object data="localhost:3000/img/nftcalendar.png" width="300" height="300"> </object> -->
    <div style="background: #E6CCA9;
        background-image:
        linear-gradient(#E6CCA9, #D06583);
        display: flex;
        flex-direction: column;
        align-items: center;
    ">
        <h2 style="letter-spacing: 2px;font-size: 2.5rem;margin-bottom: 1.5rem;">Create an NFT with your inputs and send it to your vallet with Opensea link<i class="fa-solid fa-monkey"></i></h2>
        <div class="container" id="container" >
            <div class="form-container sign-in-container">
                <form action="javascript:RBG_CHANGE({target:{id:'all'}})" style="align-items:baseline;">
                    <div class="flex-left-to-right">
                        <h2>title:</h2>
                        <input id="title" type="text" name="fname" value="" onchange="RBG_CHANGE(event)" maxlength="200" style="width:200px">
                    </div>
                    <div class="flex-left-to-right">
                        <h2>R:</h2>
                        <input id="R" type="number" name="R" value="0" onchange="RBG_CHANGE(event)" max="256" style="width:200px">
                    </div>
                    <div class="flex-left-to-right">
                        <h2>B:</h2>
                        <input id="B" type="number" name="B" value="0" onchange="RBG_CHANGE(event)" max="256" style="width:200px">
                    </div>
                    <div class="flex-left-to-right">
                        <h2>G:</h2>
                        <input id="G" type="number" name="G" value="0" onchange="RBG_CHANGE(event)" max="256" style="width:200px">
                    </div>
                    <div class="flex-left-to-right">
                        <h2>text:</h2>
                        <input id="text_size" type="number" name="text_size" value="15" onchange="RBG_CHANGE(event)" max="100" style="width:200px">
                    </div>
                    <div>
                        <button onclick="mintPredefinedNFT()" style="margin-bottom: 5px; background-color: #543636;"><i class="fas fa-hammer"></i>MINT</button>
                        <button style="background-color: #543636;" id="reset">RESET DESING</button>
                        <button style="background-color: #123;" id="reset" onclick="nameUpdate(read=true)">printName</button>
                        <input id="nameUpdateItem" type="input"><button style="background-color: #123;" id="reset" onclick="nameUpdate()">nameUpdate</button>
                        <a class="mint-btn home-btns" href="#" onclick="getRGBA()"><i class="fas fa-hammer"></i> getRGBA</a>
                    </div>
                </form>
            </div>
            <div class="overlay-container" width="100%">
                <div class="" style="display:flex;align-items: center; flex-direction: row; height:100%">
                    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" width="350px" height="350px">
                        <style>.base { fill: white; font-family: serif; font-size: 15px; }</style>
                        <rect width="350px" height="350px" fill="rgba(0,0,0,1)" />
                        <text id="name_plate" x="5%" y="20%" class="base" dominant-baseline="right" text-anchor="right">EpicLordHamburger</text>
                        <text id="RGB_plate" x="5%" y="40%" class="base" dominant-baseline="right" text-anchor="right">(0,0,0)</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div id="roadmap">
        <div class="road">
            <div class="road-label road-top">
                <h3>Q4 2021</h3>
            </div>
            <p>Twitter, Website, and Discord server launch. Release on Solana-List. Conceptualization to make a big community with Airdrops, Giveaways, and Competitions. 1010 Rotating Suzannes 1st GEN's NFTs available to mint.</p>
        </div>
        <div class="road">
            <div class="road-label">
                <h3>Q1 2022</h3>
            </div>
            <p>Special NFTs release and available on Secondary Market. Collaboration with an Exclusive Partnership.</p>
        </div>
        <div class="road">
            <div class="road-label">
                <h3>Q2 2022</h3>
            </div>
            <p>Rotating Suzanne's Token and NFT marketplace release on our website.</p>
        </div>
        <div class="road">
            <div class="road-label">
                <h3>Q3 2022</h3>
            </div>
            <p>Snapshot for top 10 token holders to get free Special NFT.</p>
        </div>
        <div class="road">
            <div class="road-label">
                <h3>Q4 2022</h3>
            </div>
            <p>Integrating Rotating Suzanne's NFTs to some huge metaverse for everyone can use it.</p>
        </div>
        <div class="road">
            <div class="road-label">
                <h3>soon</h3>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="{{ url_for('static', filename='./Solana Drink_files/vanilla-tilt.min.js.download') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='./Solana Drink_files/script.js.download') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" type="application/javascript"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js" type="application/javascript"></script>
    <script>
    // MAIN SCRIPT
    var balance, abi, web3Connected, chanId_int, account, connectedContract, provider, signer
    const chainId = "0x4";
    var CONTRACT_ADDRESS = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
    CONTRACT_ADDRESS = "0xeA38a53AF133dB4D2e7f4537fCeA8e67392E11Ba";
    //////////////////////////////////////////////////////////////////////////////////////////
    var R = 0;
    var B = 0;
    var G = 0;
    var text_size = "15px";

    function RBG_CHANGE(event) {
        // var name_plate = document.querySelector("#name_plate"); 
        // var RGB_plate = document.querySelector("#RGB_plate"); 
        if (event.target.id == "all" || event.target.id == "R") {
            R = event.target.value;
            document.querySelector("#RGB_plate").innerHTML = `rgb(${R},${B},${G})`;
            document.querySelector("rect").setAttribute("fill", `rgb(${R},${B},${G})`);
        } else if (event.target.id == "all" || event.target.id == "B") {
            B = event.target.value;
            document.querySelector("#RGB_plate").innerHTML = `rgb(${R},${B},${G})`;
            document.querySelector("rect").setAttribute("fill", `rgb(${R},${B},${G})`);
        } else if (event.target.id == "all" || event.target.id == "G") {
            G = event.target.value;
            document.querySelector("#RGB_plate").innerHTML = `rgb(${R},${B},${G})`;
            document.querySelector("rect").setAttribute("fill", `rgb(${R},${B},${G})`);

        } else if (event.target.id == "all" || event.target.id == "title") {
            document.querySelector("#name_plate").innerHTML = event.target.value
        } else if (event.target.id == "all" || event.target.id == "text_size") {
            document.querySelectorAll(".base").forEach(e => {
                text_size = event.target.value + "px";
                e.style['font-size'] = text_size

            });
        }
    }
    //////////////////////////////////////////////////////////////////////////////////////////
    const waitAndUpdate = async (Txn, innerHTMLid) => {
        let dotter = setInterval(() => {
            document.querySelector(innerHTMLid).innerText += "."
        }, 500)
        await Txn.wait()
        .then((tx) => {
            console.log(tx)
            // tnxLink = `https://rinkeby.etherscan.io/tx/${r.transactionHash}`;
            document.querySelector(innerHTMLid).innerText = `Mined, see transaction: <a href="https://rinkeby.etherscan.io/tx/${tx.transactionHash}" target="blank_" style="color: cornflowerblue;">etherscan</a>`;
            clearInterval(dotter);
        })
    }
    const askContractToMintNft = async () => {
        try {
            const { ethereum } = window;

            if (ethereum) {
                const provider = new ethers.providers.Web3Provider(ethereum);
                const signer = provider.getSigner();
                connectedContract = new ethers.Contract(CONTRACT_ADDRESS, abi.abi, signer);

                document.querySelector("#info").innerText = "Going to pop wallet now to pay gas...";
                let nftTxn = await connectedContract.makeAnEpicNFT();
                await waitAndUpdate(nftTxn, "#info")

                document.querySelector("#info").innerText = "Mining...please wait.";

                document.querySelector("#info").innerHTML = `Mined, see transaction: <a href="https://rinkeby.etherscan.io/tx/${nftTxn.hash}" target="blank_" style="color: cornflowerblue;">etherscan</a>`;

            } else {
                document.querySelector("#info").innerText = "Ethereum object doesn't exist!";
            }
        } catch (error) {
            console.log(error)
        }
    }
    const nameUpdate = async (read = false) => {
        if (account == undefined) {
            document.querySelector("#info").innerText = "You need to connect to blochcain network first.";
            return await checkIfWalletIsConnected()
        }
        /*
         * First make sure we have access to window.ethereum
         */
        const { ethereum } = window;
        if (ethereum) {
            provider = new ethers.providers.Web3Provider(ethereum);
            signer = provider.getSigner();
            connectedContract = new ethers.Contract(CONTRACT_ADDRESS, abi.abi, signer);

            // const nftContractFactory = await hre.ethers.getContractFactory('MyContract');
            // const nftContract = await nftContractFactory.deploy();
            // await nftContract.deployed();
            if (read) {
                console.log(await connectedContract.name())
            } else {
                console.log(await connectedContract.name())
                console.log(document.querySelector("#nameUpdateItem").value)
                var mineing = await connectedContract.updateName(document.querySelector("#nameUpdateItem").value)
                await waitAndUpdate(mineing, "#info")
                console.log(await connectedContract.name())
            }
        }
        return;
    }
    const getRGBA = async () => {
        if (account == undefined) {
            document.querySelector("#info").innerText = "You need to connect to blochcain network first.";
            return await checkIfWalletIsConnected()
        }
        /*
         * First make sure we have access to window.ethereum
         */
        const { ethereum } = window;
        if (ethereum) {
            document.querySelector("#info").innerText = "Connected to ethereum network."
            const provider = new ethers.providers.Web3Provider(ethereum);
            const signer = provider.getSigner();
            connectedContract = new ethers.Contract(CONTRACT_ADDRESS, abi.abi, signer);
            // /_ping = await connectedContract._ping()
            // /ping = await connectedContract.ping();
            //console.log(_ping,ping)
            //debugger;

            document.querySelector("#info").innerText = "Going to pop wallet now to pay gas...";
            let overrides = {
                value: ethers.utils.parseEther("0.0001") // ether in this case MUST be a string
            }
            var nft_ = await connectedContract.getRGB(overrides);
            document.querySelector("#info").innerText = nft_; //"Mining...please wait.";
            await nft_.wait()
                .then((r) => {
                    console.log(r);
                })
            console.log("nft_", nft_)
            // .send({
            //     from: '0x8631d67899F62B2784B7c92d143903b3b2fD0B60', 
            //     value: 3 
            //     })
            // .then(res => 
            //     console.log('Success', res))
            // .catch(err => console.log(err)) 
        }

    }
    const checkIfWalletIsConnected = async () => {
        /*
         * First make sure we have access to window.ethereum
         */
        const { ethereum } = window;

        if (!ethereum) {
            document.querySelector("#info").innerText = "Make sure you have a wallet."
            return;
        } else {
            document.querySelector("#info").innerText = "Wallet found. Attemting to connect"
            setTimeout(() => {
                if (document.querySelector("#info").innerText == "Wallet found. Attemting to connect") {
                    document.querySelector("#info").innerText = "Failed to connect the wallet, please refresh the page and try again"
                }
            }, 333);
        }
        if (ethereum.chainId != "0x4") {
            document.querySelector("#info").innerText = "This Sale is only available on rinkeby network, attemting to switch networks";
            return await switchEthereumChain(chainId)
        }
        /*
         * Check if we're authorized to access the user's wallet
         */
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });

        /*
         * User can have multiple authorized accounts, we grab the first one if its there!
         */
        if (accounts.length !== 0) {
            account = accounts[0];
            web3Connected = new Web3(Web3.givenProvider)
            balance = await web3Connected.eth.getBalance(account)
                .then(b => { return web3Connected.utils.fromWei(b) });
            document.querySelector("#account_info").innerHTML = `<i class="fa-solid fa-ban"></i> ` + account.slice(0, 5) + "..." + account.slice(-5) + "<br>" + balance.slice(0, 11) + " ETH";
            document.querySelector("#info").innerText = "Connected to network";
            chanId_int = await web3Connected.eth.getChainId();

            // if (chanId_int != 4) { // rinkeby
            //     document.querySelector("#info").innerText = "This Sale is only available on rinkeby network, attemting to switch networks";
            //     return await switchEthereumChain(chainId)
            // }
        } else {
            document.querySelector("#info").innerText = "Connection failed, please try again";
        }
        provider = new ethers.providers.Web3Provider(ethereum);
        signer = provider.getSigner();
        connectedContract = new ethers.Contract(CONTRACT_ADDRESS, abi.abi, signer);
    }
    
    const mintPredefinedNFT = async () => {
        if (account == undefined) {
            document.querySelector("#info").innerText = "You need to connect to blochcain network first.";
            return await checkIfWalletIsConnected()
        }
        /*
         * First make sure we have access to window.ethereum
         */
        const { ethereum } = window;
        if (ethereum) {
            document.querySelector("#info").innerText = "Connected to ethereum network."
            const provider = new ethers.providers.Web3Provider(ethereum);
            const signer = provider.getSigner();
            const connectedContract = new ethers.Contract(CONTRACT_ADDRESS, abi.abi, signer);
            var name_plate = document.querySelector("#name_plate").innerHTML;
            var RGB_plate = document.querySelector("#RGB_plate").innerHTML;
            console.log(name_plate, RGB_plate)
            document.querySelector("#info").innerText = "Going to pop wallet now to pay gas...";
            /// TODO
            var nft_ = await connectedContract.mintPredefinedNFT(overrides);
            document.querySelector("#info").innerText = nft_; //"Mining...please wait.";
            await nft_.wait()
                .then((r) => {
                    console.log(r);
                })
            console.log("nft_", nft_)
            // .send({
            //     from: '0x8631d67899F62B2784B7c92d143903b3b2fD0B60', 
            //     value: 3 
            //     })
            // .then(res => 
            //     console.log('Success', res))
            // .catch(err => console.log(err)) 
        }

    }

    function loadData() {
        axios({
            url: "{{ url_for('static', filename='contracts/MyContract.json') }}",
            responseType: 'json',
            credentials: "include",
            mode: "no-cors",
            headers: {
                "Accept": "application/json; odata=verbose"
            }
        }).then((response) => {
            abi = response.data;
        }).catch(err => { console.error(err) })
    }
    async function switchEthereumChain(chainId) {
        await window.ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: chainId }], // chainId must be in hexadecimal numbers
        });
        return await checkIfWalletIsConnected();
    }
    console.log(ethers)
    </script>
</body>
<style>
@media only screen and (max-width: 600px) {
    body {
        background-color: lightblue;
    }
}
</style>

</html>